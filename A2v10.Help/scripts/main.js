(function() { 
/*GENERATED*/
const content = {
  "items": [
    {
      "title": "A2v10:SDK",
      "url": "/index",
      "items": [
        {
          "title": "Что нового",
          "url": "/whatsnew/index",
          "items": [
            {
              "title": "Апрель 2018",
              "url": "/whatsnew/w201804"
            },
            {
              "title": "Март 2018",
              "url": "/whatsnew/w201803"
            },
            {
              "title": "Февраль 2018",
              "url": "/whatsnew/w201802"
            }
          ]
        }
      ]
    },
    {
      "title": "Модели",
      "url": "/models/index",
      "items": [
        {
          "title": "Модели данных",
          "url": "/models/datamodels"
        },
        {
          "title": "model.json",
          "url": "/models/modelfile"
        }
      ]
    },
    {
      "title": "Представления",
      "url": "/views/index",
      "items": [
        {
          "title": "Xaml",
          "url": "/xaml/index",
          "items": [
            {
              "title": "Элементы управления",
              "url": "/xaml/controls/index",
              "items": [
                {
                  "title": "Button",
                  "url": "/xaml/controls/button"
                },
                {
                  "title": "Checkbox",
                  "url": "/xaml/controls/checkbox"
                },
                {
                  "title": "DataGrid",
                  "url": "/xaml/controls/datagrid"
                },
                {
                  "title": "DataGridColumn",
                  "url": "/xaml/controls/datagridcolumn"
                },
                {
                  "title": "DatePicker",
                  "url": "/xaml/controls/datepicker"
                },
                {
                  "title": "MenuItem",
                  "url": "/xaml/controls/menuitem"
                },
                {
                  "title": "Radio",
                  "url": "/xaml/controls/radio"
                },
                {
                  "title": "Selector",
                  "url": "/xaml/controls/selector"
                },
                {
                  "title": "Table",
                  "url": "/xaml/controls/table"
                },
                {
                  "title": "TableCell",
                  "url": "/xaml/controls/tablecell"
                },
                {
                  "title": "TableMarkCell",
                  "url": "/xaml/controls/tablemarkcell"
                },
                {
                  "title": "TableRow",
                  "url": "/xaml/controls/tablerow"
                },
                {
                  "title": "TextBox",
                  "url": "/xaml/controls/texbox"
                }
              ]
            },
            {
              "title": "Контейнеры",
              "url": "/xaml/containers/index",
              "items": [
                {
                  "title": "Block",
                  "url": "/xaml/containers/block"
                },
                {
                  "title": "Dialog",
                  "url": "/xaml/containers/dialog"
                },
                {
                  "title": "DropDownMenu",
                  "url": "/xaml/containers/dropdownmenu"
                },
                {
                  "title": "Grid",
                  "url": "/xaml/containers/grid"
                },
                {
                  "title": "Include",
                  "url": "/xaml/containers/include"
                },
                {
                  "title": "Partial",
                  "url": "/xaml/containers/partial"
                },
                {
                  "title": "Splitter",
                  "url": "/xaml/containers/splitter"
                },
                {
                  "title": "StackPanel",
                  "url": "/xaml/containers/stackpanel"
                }
              ]
            },
            {
              "title": "Текстовые элементы",
              "url": "/xaml/text/index",
              "items": [
                {
                  "title": "Break",
                  "url": "/xaml/text/break"
                },
                {
                  "title": "Hyperlink",
                  "url": "/xaml/text/hyperlink"
                },
                {
                  "title": "Line",
                  "url": "/xaml/text/line"
                },
                {
                  "title": "Popover",
                  "url": "/xaml/text/popover"
                },
                {
                  "title": "Span",
                  "url": "/xaml/text/span"
                },
                {
                  "title": "TagLabel",
                  "url": "/xaml/text/taglabel"
                },
                {
                  "title": "Text",
                  "url": "/xaml/text/text"
                }
              ]
            }
          ]
        },
        {
          "title": "Привязки",
          "url": "/bind/index",
          "items": [
            {
              "title": "Bind",
              "url": "/bind/bind"
            },
            {
              "title": "BindCmd",
              "url": "/bind/bindcmd"
            }
          ]
        }
      ]
    },
    {
      "title": "Контроллеры",
      "url": "/controllers/index",
      "items": [
        {
          "title": "Шаблоны",
          "url": "/template/index",
          "items": [
            {
              "title": "Свойства",
              "url": "/template/properties"
            },
            {
              "title": "События",
              "url": "/template/events"
            },
            {
              "title": "Команды",
              "url": "/template/commands"
            },
            {
              "title": "Валидаторы",
              "url": "/template/validators"
            }
          ]
        },
        {
          "title": "Модули",
          "url": "/modules/index",
          "items": [
            {
              "title": "std:utils",
              "url": "/modules/stdutils"
            }
          ]
        },
        {
          "title": "ViewModel",
          "url": "/viewmodel/index"
        }
      ]
    },
    {
      "title": "О справочной системе",
      "url": "/app/about"
    }
  ]
}
;
const files = [{"url":"/index","title":"Платформа А2"},{"url":"/app/about","title":"О программе"},{"url":"/bind/bind","title":"Bind"},{"url":"/bind/bindcmd","title":"BindCmd"},{"url":"/bind/index","title":"Привязки"},{"url":"/controllers/index","title":"Контроллеры"},{"url":"/models/datamodels","title":"Модели данных"},{"url":"/models/index","title":"Модели"},{"url":"/models/modelfile","title":"Файл model.json"},{"url":"/template/commands","title":"Шаблоны. Команды"},{"url":"/template/events","title":"Шаблоны. События"},{"url":"/template/index","title":"Шаблоны"},{"url":"/template/properties","title":"Шаблоны. Свойства"},{"url":"/template/validators","title":"Шаблоны. Валидаторы"},{"url":"/views/index","title":"Представления"},{"url":"/whatsnew/index","title":"Что нового"},{"url":"/whatsnew/w201802","title":"Что нового. Февраль 2018"},{"url":"/whatsnew/w201803","title":"Что нового. Март 2018"},{"url":"/whatsnew/w201804","title":"Что нового. Апрель 2018"},{"url":"/xaml/index","title":"Представления Xaml"},{"url":"/xaml/containers/block","title":"Xaml.Block"},{"url":"/xaml/containers/container","title":"Xaml.Container"},{"url":"/xaml/containers/dialog","title":"Xaml.Dialog"},{"url":"/xaml/containers/dropdownmenu","title":"Xaml.DropDownMenu"},{"url":"/xaml/containers/grid","title":"Xaml.Grid"},{"url":"/xaml/containers/include","title":"Xaml.Include"},{"url":"/xaml/containers/index","title":"XAML. Контейнеры"},{"url":"/xaml/containers/partial","title":"Xaml.Partial"},{"url":"/xaml/containers/splitter","title":"Xaml.Splitter"},{"url":"/xaml/containers/stackpanel","title":"Xaml.StackPanel"},{"url":"/xaml/controls/button","title":"Xaml.Button"},{"url":"/xaml/controls/checkbox","title":"Xaml.CheckBox"},{"url":"/xaml/controls/datagrid","title":"Xaml.DataGrid"},{"url":"/xaml/controls/datagridcolumn","title":"Xaml.DataGridColumn"},{"url":"/xaml/controls/datepicker","title":"Xaml.DatePicker"},{"url":"/xaml/controls/index","title":"XAML. Элементы управления"},{"url":"/xaml/controls/menuitem","title":"Xaml.MenuItem"},{"url":"/xaml/controls/radio","title":"Xaml.Radio"},{"url":"/xaml/controls/selector","title":"Xaml.Selector"},{"url":"/xaml/controls/table","title":"Xaml.Table"},{"url":"/xaml/controls/tablecell","title":"Xaml.TableCell"},{"url":"/xaml/controls/tablemarkcell","title":"Xaml.TableMarkCell"},{"url":"/xaml/controls/tablerow","title":"Xaml.TableRow"},{"url":"/xaml/controls/textbox","title":"Xaml.TextBox"},{"url":"/xaml/text/break","title":"Xaml.Break"},{"url":"/xaml/text/hyperlink","title":"Xaml.Hyperlink"},{"url":"/xaml/text/index","title":"XAML. Текстовые управления"},{"url":"/xaml/text/inline","title":"Xaml.Inline"},{"url":"/xaml/text/line","title":"Xaml.Line"},{"url":"/xaml/text/popover","title":"Xaml.Popover"},{"url":"/xaml/text/span","title":"Xaml.Span"},{"url":"/xaml/text/taglabel","title":"Xaml.TagLabel"},{"url":"/xaml/text/text","title":"Xaml.Text"}];
const index = {"Bind":[2],"BindCmd":[3],"Block":[20],"Break":[44],"Button":[30],"CheckBox":[31],"commands":[9],"Controls":[35],"DataGrid":[32],"DataGridColumn":[33],"DatePicker":[34],"Dialog":[22],"DropDownMenu":[23],"events":[10],"Grid":[24],"Grid.Col":[24],"Grid.ColSpan":[24],"Grid.Row":[24],"Grid.RowSpan":[24],"Hyperlink":[45],"Include":[25],"Inline":[47],"Inlines":[46],"Line":[48],"MenuItem":[36],"model.json":[8],"Partial":[27],"Popover":[49],"properties":[12],"Radio":[37],"Selector":[38],"Span":[50],"Splitter":[28],"StackPanel":[29],"Table":[39],"TableCell":[40],"TableMarkCell":[41],"TableRow":[42],"TagLabel":[51],"template":[11],"Text":[52],"TextBox":[43],"validators":[13],"Валидаторы":[13],"Команды":[9],"Контейнеры":[26],"Модели":[7],"Модели данных":[6],"Свойства":[12],"События":[10],"Текстовые элементы":[46],"Что нового":[15,16,17,18],"Шаблон":[11],"Элементы управления":[35]};
const fts = {"платформа":[0],"а2v10":[0],"представляет":[0,20,22,23,24,25,27,28,29,51],"собой":[0,20,22,23,24,25,27,28,29,51],"инструментальное":[0],"средство":[0],"предназначенное":[0],"разработки":[0],"прикладных":[0],"решений":[0],"связанных":[0,18],"автоматизацией":[0],"учета":[0],"управления":[0,18,20,22,24,30,31,32,33,34,35,36,37,38,39,40,41,42,43],"предприятием":[0],"справочная":[0,1],"система":[0,1],"рассчитана":[0],"тех":[0],"разрабатывает":[0],"устанавливает":[0],"настраивает":[0],"обслуживает":[0],"прикладные":[0],"решения":[0],"построенные":[0],"этой":[0],"программной":[0],"платформе":[0,15],"обратите":[0],"внимание":[0],"справочной":[0,1,16],"системе":[0,1],"содержится":[0],"информация":[0],"конечных":[0],"пользователей":[0],"включает":[0],"описание":[0,24,29,51],"принципов":[0],"построения":[0],"платформы":[0,15],"объектной":[0],"модели":[0,6,7,16,18],"свойствах/методах/событиях":[0],"структуры":[0],"базы":[0],"данных":[0,6,16,17,18,24,35],"нового":[0,15],"краткая":[0],"последних":[0],"изменениях":[0],"документации":[0],"создана":[1],"использованием":[1,16],"программного":[1],"обеспечения":[1],"открытым":[1],"исходным":[1],"кодом:":[1],"vue.js":[1],"copyright":[1],"2014":[1],"2018":[1,15,16,17,18],"evan":[1],"you":[1],"домашняя":[1],"страница":[1],"лицензия":[1],"bind":[2,16],"bindcmd":[3,16],"привязки":[4,16,24],"контроллеры":[5],"файл":[8,16],"model.json":[8,16],"шаблоны":[9,10,11,12,13,16],"команды":[9],"события":[10],"свойства":[12,20,21,22,23,24,25,27,28,29,51],"валидаторы":[13,17],"представления":[14,19],"а2":[15],"этом":[15],"разделе":[15],"описываются":[15],"последние":[15],"изменения":[15,18,35],"дополнения":[15],"программах":[15],"версии":[15,16,17,18],"10":[15],"текущий":[15],"номер":[15,24],"отображается":[15],"правом":[15],"нижнем":[15],"углу":[15],"окна":[15],"браузера":[15],"выпуск":[15,16,17,18],"3":[15,18],"апрель":[15,18],"2":[15,17],"март":[15,17],"1":[15,16,24],"февраль":[15,16],"7109":[16],"7119":[16],"выпуски":[16,17,18],"|":[16,17,18],"предыдущий":[16,17,18],"следующий":[16,17,18],"общие":[16,17,18],"исправлена":[16,17],"ошибка":[16,17],"которой":[16,17],"нельзя":[16,17],"было":[16,17],"очистить":[16],"фильтр":[16],"перезагрузки":[16],"страницы":[16,26],"добавлены":[16,17],"темы":[16],"пользовательского":[16,24],"интерфейса":[16,24],"добавлена":[16,17,18],"возможность":[16,18],"работы":[16,17],"пользовательской":[16],"системой":[16],"открытии":[16],"элемента":[16,24,29,46,51],"новом":[16],"окне":[16],"кнопка":[16,35],"закрыть":[16],"закрывает":[16],"окно":[16],"пытается":[16],"перейти":[16],"предыдущую":[16],"страницу":[16],"можно":[16,17],"открыть":[16],"диалог":[16],"приводило":[16],"к":[16,24],"непредсказуемому":[16],"поведению":[16],"модель":[16,17,18],"описания":[16],"параметры":[16],"моделей":[16],"действиях":[16],"actions":[16],"работала":[16],"локализация":[16],"объектах":[16],"вложенными":[16],"свойствами":[16],"например":[16],"таком":[16],"свойстве:":[16],"agent.name":[16],"tagent":[16],"name":[16],"включаемых":[16],"модулях":[16],"require":[16],"xaml":[16,17,18,19],"неправильно":[16,17],"работало":[16],"свойство":[16,17,18,24,51],"disabled":[16],"объекта":[16],"menuitem":[16,35,36],"элемент":[16,17,18,20,21,22,23,24,25,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52],"dropdownmenu":[16,23,26],"поддерживает":[16],"itemssource":[16],"привязках":[16],"указанным":[16],"форматом":[16],"исправлено":[16],"правой":[16],"нижней":[16],"панели":[16,28,29],"splitter":[16,26,28],"задавать":[16,17],"минимально":[16],"допустимую":[16],"ширину":[16],"только":[16],"чтение":[16],"запрещался":[16],"selector":[16,17,35,38],"добавлен":[16,17,18],"taglabel":[16,17,46,51],"tabindex":[16],"кнопок":[16],"button":[16,30,35],"радиокнопок":[16],"radio":[16,35,37],"флажков":[16],"checkbox":[16,31,35],"dialog":[16,22,26],"добавлено":[16,17,18],"helpurl":[16],"tablemarkcell":[16,35,41],"tablerow":[16,35,42],"mark":[16],"объекте":[16],"grid":[16,24,26],"колонок":[16,24],"высоту":[16],"строк":[16,24],"c":[16],"единиц":[16],"измерения":[16],"rem":[16],"em":[16],"отрицание":[16],"условия":[16],"вложенных":[16],"элементов":[16,24,26,29],"команд":[16],"checkargument":[16],"7122":[17],"7149":[17],"объектов":[17],"текстовыми":[17],"идентификаторми":[17],"передавалось":[17],"хранимую":[17],"процедуру":[17],"обновления":[17],"пустое":[17],"значение":[17],"идентификатора":[17],"пустая":[17],"строка":[17,35],"вместо":[17],"null":[17],"модули":[17,18],"утилиты":[17],"датами":[17],"методы":[17],"add":[17],"compare":[17],"staticimage":[17],"панель":[17,26],"fullheightpanel":[17],"stackpanel":[17,26,29],"alignitems":[17,29],"toolbar":[17],"добавлять":[17],"стилизованные":[17],"кнопки":[17],"дополнительные":[17],"стили":[17,18],"gold":[17,51],"purple":[17,51],"pink":[17,51],"blue":[17,51],"salmon":[17,51],"seagreen":[17,51],"tan":[17,51],"magenta":[17,51],"команде":[17],"create":[17],"аргументы":[17],"умолчанию":[17,24],"снизу":[17],"bottomleft":[17],"table":[17,24,35,39],"cellspacing":[17],"include":[17,25,26],"partial":[17,26,27],"listitem":[17],"command":[17],"list":[17],"background":[17],"placeholder":[17],"datagridcolumn":[17,33,35],"bold":[17],"команда":[17],"mailto":[17],"7150":[18],"7152":[18],"пароля":[18],"самим":[18],"пользователем":[18],"загружать":[18],"пользовательские":[18],"метаданные":[18],"длина":[18],"текстовых":[18],"полей":[18],"элементах":[18],"эта":[18],"учитывается":[18],"автоматически":[18],"utils.fromjson":[18],"image":[18],"textbox":[18,35,43],"updatetrigger":[18],"datepicker":[18,34,35],"direction":[18],"block":[20,26],"контейнеры":[20,21,22,23,24,25,26,27,28,29],"контейнер":[20,22,24,25,27,28,29],"содержит":[20,22],"другие":[20,22],"элементы":[20,22,24,26,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52],"абстрактный":[21,47],"container":[21,29],"выпадающее":[23,26],"меню":[23,26,35],"сетку":[24],"примечание":[24],"используется":[24,51],"макетах":[24],"предназначен":[24],"отображения":[24,35,46,51],"данным":[24],"используйте":[24],"соответствующие":[24],"упрвления":[24],"как":[24],"datagrid":[24,32,35],"имя":[24,29,51],"тип":[24,29,51],"children":[24],"uielementcollection":[24],"содержимого":[24,51],"коллекция":[24],"дочерних":[24,29],"сетки":[24],"унаследовано":[24],"от":[24],"contrainer":[24],"if":[24],"boolean":[24],"включать":[24],"ли":[24],"поток":[24],"рендеринга":[24],"height":[24],"length":[24],"высота":[24],"rows":[24],"rowdefinitions":[24],"определения":[24],"columns":[24],"columndefinitions":[24],"присоединенные":[24,28],"grid.row":[24],"int32":[24],"определяет":[24],"строки":[24,46],"должен":[24],"быть":[24],"помещен":[24],"дочерний":[24],"grid.col":[24],"колонки":[24],"grid.rowspan":[24],"количество":[24],"будет":[24],"занимать":[24],"grid.colspan":[24],"grid.valign":[24],"verticalalign":[24],"вертикальное":[24],"выравнивание":[24,29],"дочернего":[24],"таблицы":[24,35],"top":[24],"контейнерные":[26],"используются":[26,35,46],"размещения":[26],"блок":[26],"сетка":[26],"вложенное":[26],"содержимое":[26,51],"часть":[26],"разделитель":[26],"содержащий":[28],"две":[28],"изменяемыми":[28],"размерами":[28],"котором":[29],"дочерние":[29],"выравниваются":[29],"одну":[29],"линию":[29],"ориентированную":[29],"вертикально":[29],"горизонтально":[29],"базовый":[29,51],"элемент:":[29,51],"orientation":[29],"enum":[29,51],"ориентация":[29],"возможные":[29,51],"значения:":[29,51],"vertical":[29],"размещаются":[29],"сверху":[29],"вниз":[29],"horizontal":[29],"слева":[29],"направо":[29],"default":[29,51],"baseline":[29],"center":[29],"start":[29],"end":[29],"базового":[29,51],"controls":[35],"ввода":[35],"флажок":[35],"таблица":[35],"колонка":[35],"выбор":[35],"даты":[35],"радиокнопка":[35],"селектор":[35],"tablecell":[35,40],"ячейка":[35],"маркера":[35],"таблице":[35],"текстовый":[35],"редактор":[35],"break":[44,46],"текстовые":[44,45,46,47,48,49,50,51,52],"hyperlink":[45,46],"inlines":[46],"текста/картинок":[46],"text":[46,52],"текст":[46],"span":[46,50],"строчный":[46],"метка":[46],"тег":[46],"ссылка":[46],"popover":[46,49],"всплывающего":[46],"перенос":[46],"line":[46,48],"горизонтальная":[46],"линия":[46],"inline":[47,51],"текстовую":[51],"метку":[51],"маркер":[51],"чаще":[51],"всего":[51],"состояния":[51],"либо":[51],"content":[51],"string":[51],"текстовое":[51],"метки":[51],"style":[51],"стиль":[51],"green":[51],"success":[51],"warning":[51],"orange":[51],"info":[51],"cyan":[51],"error":[51],"danger":[51],"red":[51]};
window.app = {content: content, files: files, index: index, fts: fts};
})();
// Copyright © 2017-2018 Alex Kukhtin. All rights reserved.

(function () {

	function doNavigate(event) {
		event.preventDefault();
		let route = this.getAttribute('data-route');
		window.vm.$emit('navigate', route);
	}

	function setHrefs(body) {
		let a = body.querySelectorAll('a');
		a.forEach(function (an) {
			let href = an.getAttribute('href');
			if (href.startsWith('http')) return; // external link
			an.setAttribute('href', '');
			an.setAttribute('data-route', href);
			an.addEventListener('click', doNavigate);
		});
		let img = body.querySelectorAll('img');
		img.forEach(function (im) {
			let src = im.getAttribute('src');
			im.setAttribute('src', '/html/' + src);
		});
	}

	function loadHtml(url) {
		return new Promise(function (resolve, reject) {
			let xhr = new XMLHttpRequest();
			xhr.onload = function () {
				if (xhr.responseText.startsWith('<!DOCTYPE')) {
					let body = document.createElement("body");
					let elem = document.createElement("div");
					body.appendChild(elem);
					elem.innerText = 'Not found';
					resolve(body);
				}
				else {
					let prs = new DOMParser();
					let doc = prs.parseFromString(xhr.responseText, 'text/html');
					let body = doc.body;
					setHrefs(body);
					resolve(body);
				}
			};
			xhr.open('GET', url, true);
			xhr.send();
		});
	}

	Vue.component('a2-include', {
		template: '<div class="content-view"></div>',
		props: {
			source: String
		},
		watch: {
			source: function (newSource, oldSource) {
				this.navigateTo(newSource);
			}
		},
		methods: {
			navigateTo(url) {
				let me = this;
				if (url === '/')
					url += 'index';
				//console.warn(url);
				loadHtml('/html' + url + '.html').then(function (elem) {
					me.$el.innerHTML = '';
					let div = document.createElement('div');
					let ch = elem.children;
					let cha = [];
					// for..of does not not for HtmlCollection in EDGE
					let esrc = elem.children;
					for (let i = 0; i < esrc.length; i++) {
						cha.push(esrc[i]);
					}
					for (ch of cha)
						me.$el.appendChild(ch);
				});
			}
		}
	});

})();
// Copyright © 2017-2018 Alex Kukhtin. All rights reserved.

(function () {

	const treeItemComponent = {
		name: 'tree-item',
		template: `
<li :title="item.title" @click.stop.prevent="doClick(item)"
    :class="{expanded: isExpanded, collapsed:isCollapsed, active:isActive(item)}" >
    <div class="overlay">
        <a class="toggle" v-if="isFolder" href @click.stop.prevent="toggle"></a>
        <span v-else class="toggle"/>
        <i :class="iconClass"/>
        <a :href="dataHref" tabindex="-1" v-text="item.title"/>
    </div>
    <ul v-if="isFolder" v-show="isExpanded">
        <tree-item v-for="(itm, index) in item.items"
            :key="index" :item="itm" :click="click" :get-href="getHref" :is-active="isActive" :expand="expand" :root-items="rootItems"/>
    </ul>   
</li>
`,
		props: {
			item: Object,
			options: Object,
			rootItems: Array,
			/* callbacks */
			click: Function,
			expand: Function,
			isActive: Function,
			getHref: Function
		},
		methods: {
			doClick(item) {
				this.click(item);
			},
			toggle() {
				if (!this.isFolder)
					return;
				Vue.set(this.item, "open", !this.item.open);
				if (!this.item.open) {
					// close all inner
					this.closeInner(this.item);
				}
			},
			closeInner(itm) {
				if (!itm.items) return;
				itm.items.forEach(t => {
					if (t.open) Vue.set(t, 'open', false);
					this.closeInner(t);
				});
			}
		},
		computed: {
			isFolder: function () {
				let ch = this.item.items;
				return ch && ch.length;
			},
			isExpanded: function () {
				return this.isFolder && this.item.open;
			},
			isCollapsed: function () {
				return this.isFolder && !this.item.open;
			},
			iconClass: function () {
				return "ico ico-" + (this.isFolder ? "node" : "leaf");
			},
			dataHref() {
				return this.getHref ? this.getHref(this.item) : '';
			}
		}
	};


	Vue.component('tree-view', {
		components: {
			'tree-item': treeItemComponent
		},
		template: `
<ul class="tree-view">
    <tree-item v-for="(itm, index) in items" :options="options" :get-href="getHref"
        :item="itm" :key="index"
        :click="click" :is-active="isActive" :expand="expand" :root-items="items">
    </tree-item>
</ul>
        `,
		props: {
			options: Object,
			items: Array,
			isActive: Function,
			click: Function,
			expand: Function,
			getHref: Function
		},
		computed: {
		},
		methods: {
		},
		created() {
		},
		updated() {
		}
	});

	Vue.component('a2-content-view', {
		template: '<div class="sub-side"><tree-view ref="treeView" :items="root.items" :click="navigate" :is-active="isActive" :get-href="getHRef"></tree-view></div>',
		data() {
			return {
				root: window.app.content
			};
		},
		computed: {
			currentUrl() {
				return window.location.pathname;
			}
		},
		methods: {
			navigate(item) {
				var vm = window.vm;
				vm.$emit('navigate', item.url);
				this.findActive(item.url);
			},
			isActive(item) {
				return item.active;
			},
			getHRef(item) {
				return item.url;
			},
			findActive(url) {

				function findOne(item) {
					let active = item.url.toLowerCase() === url.toLowerCase();
					Vue.set(item, 'active', active);
					if (active)
						document.title = item.title;
					if (!item.items) return;
					item.items.forEach(findOne);
					if (item.items.some(itm => itm.active || itm.open)) {
						Vue.set(item, 'open', true);
					}
				}

				this.root.items.forEach(findOne);
			}
		},
		mounted() {
			const vm = window.vm;
			vm.$on('navigated', (url) => {
				//console.warn('navigated:' + url);
				this.findActive(url);
			});
		}
	});
})();
// Copyright © 2017-2018 Alex Kukhtin. All rights reserved.

(function () {



	Vue.component('a2-index-view', {
		template: `
<div class="sub-side">
    <div class="index-view">
        <div class="search-block">
            <label>Введите ключевое слово для поиска:</label>
            <input class="input-search" type=text v-model="fragment"></input>
        </div>
	    <ul class="index-tree">
		    <li v-for="(val, valIndex) in list">
                <a :class="{'active': isActive(val)}" v-if="val.files.length === 1" v-text="val.word" @click.stop.prevent="navigate(val, 0)"></a>
                <div v-else>
                    <span class="word-folder" v-text="val.word"></span>
                    <ul>
                        <li class="file-link" v-for="(itm, itmIndex) in val.files">
                            <a :class="{active: isActive(itm)}" v-text="itm.title" @click.stop.prevent="navigateFile(itm)"></a>
                        </li>
                    </ul>
                </div>
            </li>
	    </ul>
    </div>
</div>`,
		/*
			<pre>list: {{active}}</pre>
			<pre v-once>{{root}}</pre><pre v-once>{{files}}</pre>
		*/
		data() {
			return {
				root: window.app.index,
				files: window.app.files,
				active: null,
				fragment: ''
			};
		},
		computed: {
			list() {
				const f = this.fragment.toLowerCase();
				const root = this.root;
				const files = this.files;
				return Object.keys(this.root)
					.filter(val => !f || val.toLowerCase().indexOf(f) !== -1)
					.map(v => { return { word: v, files: root[v].map(f => files[f]) }; });
			}
		},
		methods: {
			isActive(itm) {
				return itm === this.active;
			},
			navigate(itm, ix) {
				var vm = window.vm;
				this.active = itm;
				vm.$emit('navigate', itm.files[ix].url);
			},
			navigateFile(itm) {
				var vm = window.vm;
				this.active = itm;
				vm.$emit('navigate', itm.url);
			}
		},
		mounted() {
		}
	});
})();
// Copyright © 2017-2018 Alex Kukhtin. All rights reserved.

(function () {

	// {{key}} : {{res}} : {{res.length}}


	const debugMode = false;

	Vue.component('a2-search-view', {
		template:
			`<div class="sub-side">
    <div class="index-view">
	    <div class="search-block">
            <label>Введите слово для поиска:</label>
		    <input class="input-search" v-model.lazy="searchText">
            <a v-if="debugMode" @click="showDebug">debug</a>
	    </div>
        <ul class="debug-list" v-if="debugVisible">
            <li v-for="(res, key) in words" v-text="res"></li>
        </ul>
	    <ul class="index-tree" v-else>
		    <li v-for="(res, key) in searchResult">
                <a v-text="key" v-if="res.length == 1" 
                    :class="{active: isActive(res[0], key)}" 
                    @click.stop.prevent="navigate(res[0], key)"></a>
                <div v-else>
                    <span class="word-folder" v-text="key"></span>
                    <ul>
                        <li class="file-link" v-for="(ix) in res">
                            <a v-text="file(ix)" 
                                :class="{active: isActive(ix, key)}" 
                                @click.stop.prevent="navigate(ix, key)"></a>
                        </li>
                    </ul>
                </div>
            </li>
	    </ul>
    </div>
</div>`,
		data() {
			return {
				searchText: '',
				activeKey: '',
				activeIndex: 0,
				debugMode: debugMode,
				debugVisible: false
			};
		},
		watch: {
			searchText(newVal) {
			}
		},
		computed: {
			words() {
				let fts = window.app.fts;
				return Object.keys(fts);
			},
			searchResult() {
				let fts = window.app.fts;
				let r = {};
				if (!this.searchText) return r;
				let st = this.searchText.toUpperCase();
				for (let key in fts) {
					if (key.toUpperCase().indexOf(st) !== -1)
						r[key] = fts[key];
				}
				return r;
			}
		},
		methods: {
			file(ix) {
				let file = window.app.files[ix];
				return file ? file.title : '#ERR';
			},
			isActive(ix, key) {
				return ix === this.activeIndex && key === this.activeKey;
			},
			navigate(ix, key) {
				var vm = window.vm;
				this.activeKey = key;
				this.activeIndex = ix;
				vm.$emit('navigateFile', ix);
			},
			showDebug() {
				if (this.debugMode)
					this.debugVisible = true;
			}
		}
	});
})();
// Copyright © 2017-2018 Alex Kukhtin. All rights reserved.

(function () {

	function makeUrl(url) {
		if (url.startsWith('/'))
			return url; // root-based
		let cUrl = window.location.pathname.split('/').filter(x => !!x);
		cUrl.splice(cUrl.length - 1, 1);
		let nUrl = url.split('/').filter(x => !!x);
		let xUrl = [];
		nUrl.forEach(x => {
			if (x === '..')
				cUrl.splice(cUrl.length - 1, 1);
			else
				xUrl.push(x);
		});
		let newUrl = cUrl.concat(xUrl);
		return '/' + newUrl.join('/');
	}

	const vm = new Vue({
		el: '#app',
		data: {
			content: '',
			activeTab: 'content'
		},
		methods: {
			navigate(url) {
                url = makeUrl(url);
                if (this.content === url)
                    return;
				window.history.pushState(null, null, url);
                this.content = url;
                this.$emit('navigated', this.content);
			},
			tab(name) {
				this.activeTab = name;
			},
			isActive(name) {
				return name === this.activeTab;
			}
		},
		created() {
			let me = this;
            window.vm = this;
			window.addEventListener('popstate', function () {
                me.content = window.location.pathname;
                me.$emit('navigated', me.content);
			}, false);

			this.$on('navigate', function (url) {
				me.navigate(url);
			});

            this.$on('navigateFile', function (index) {
				let files = window.app.files;
				let file = files[index];
				me.navigate(file.url);
			});
		},
		mounted() {
			let url = window.location.pathname;
			if (url === '/')
				url = '/index';
			this.navigate(url);
		}
    });
})();